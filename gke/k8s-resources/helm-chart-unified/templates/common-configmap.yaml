apiVersion: v1
kind: ConfigMap
metadata:
  name: voteapp-config
  namespace: {{ .Release.Namespace }}
data:
  # Database configuration (PostgreSQL via Cloud SQL Proxy or local)
  MYSQL_HOST: {{ .Values.global.db.host | quote }}
  MYSQL_DATABASE: {{ .Values.global.db.name | quote }}
  
  # Redis configuration (Memorystore)
  REDIS_HOST: {{ .Values.global.redis.host | quote }}
  REDIS_PORT: {{ .Values.global.redis.port | quote }}
  
  # Cloud SQL Connection Name (for proxy sidecar configuration)
  CLOUD_SQL_CONNECTION_NAME: {{ .Values.global.db.connectionName | quote }}
